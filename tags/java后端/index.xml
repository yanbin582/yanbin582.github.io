<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Java后端 on 严彬-yabi</title>
        <link>https://yanbin582.github.io/tags/java%E5%90%8E%E7%AB%AF/</link>
        <description>Recent content in Java后端 on 严彬-yabi</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <copyright>严彬-yabi</copyright>
        <lastBuildDate>Sat, 29 Mar 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://yanbin582.github.io/tags/java%E5%90%8E%E7%AB%AF/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>MQ基础</title>
        <link>https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/</link>
        <pubDate>Sat, 29 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/</guid>
        <description>&lt;img src="https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image.png" alt="Featured image of post MQ基础" /&gt;&lt;h1 id=&#34;rabbitmq&#34;&gt;RabbitMQ
&lt;/h1&gt;&lt;h2 id=&#34;什么是mq&#34;&gt;什么是MQ？
&lt;/h2&gt;&lt;p&gt;微服务一旦拆分，必然涉及到服务之间的相互调用，目前我们服务之间调用采用的都是基于OpenFeign的调用。这种调用中，调用者发起请求后需要&lt;strong&gt;等待&lt;/strong&gt;服务提供者执行业务返回结果后，才能继续执行后面的业务。也就是说调用者在调用过程中处于阻塞状态，因此我们称这种调用方式为&lt;strong&gt;同步调用&lt;/strong&gt;，也可以叫&lt;strong&gt;同步通****讯&lt;/strong&gt;。但在很多场景下，我们可能需要采用&lt;strong&gt;异步通讯&lt;/strong&gt;的方式，为什么呢？&lt;/p&gt;
&lt;p&gt;解读：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;同步通讯：就如同打视频电话，双方的交互都是实时的。因此同一时刻你只能跟一个人打视频电话。&lt;/li&gt;
&lt;li&gt;异步通讯：就如同发微信聊天，双方的交互不是实时的，你不需要立刻给对方回应。因此你可以多线操作，同时跟多人聊天。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;两种方式各有优劣，打电话可以立即得到响应，但是你却不能跟多个人同时通话。发微信可以同时与多个人收发微信，但是往往响应会有延迟。&lt;/p&gt;
&lt;p&gt;所以，如果我们的业务需要实时得到服务提供方的响应，则应该选择同步通讯（同步调用）。而如果我们追求更高的效率，并且不需要实时响应，则应该选择异步通讯（异步调用）。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329172734739.png&#34;
	width=&#34;1558&#34;
	height=&#34;776&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329172734739_hu17008418262193256640.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329172734739_hu1812115693297789940.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329172734739&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;200&#34;
		data-flex-basis=&#34;481px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329175424219.png&#34;
	width=&#34;1507&#34;
	height=&#34;787&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329175424219_hu9862546043477401084.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329175424219_hu10382442142941190223.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329175424219&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;191&#34;
		data-flex-basis=&#34;459px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;同步调用和异步调用的区别和应用场景:&lt;/p&gt;
&lt;h3 id=&#34;同步调用&#34;&gt;同步调用：
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329190141591.png&#34;
	width=&#34;1588&#34;
	height=&#34;788&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329190141591_hu17111950169294109629.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329190141591_hu10863860386414429553.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329190141591&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;201&#34;
		data-flex-basis=&#34;483px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329190239306.png&#34;
	width=&#34;867&#34;
	height=&#34;499&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329190239306_hu3898715353509557074.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329190239306_hu11478970304297212067.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329190239306&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;173&#34;
		data-flex-basis=&#34;416px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;异步调用&#34;&gt;异步调用：
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329190532742.png&#34;
	width=&#34;1542&#34;
	height=&#34;720&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329190532742_hu17449419214694055351.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329190532742_hu11570570896291135908.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329190532742&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;214&#34;
		data-flex-basis=&#34;514px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329194854575.png&#34;
	width=&#34;1565&#34;
	height=&#34;786&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329194854575_hu13997393015645307352.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329194854575_hu15502022603977122177.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329194854575&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;199&#34;
		data-flex-basis=&#34;477px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329194924817.png&#34;
	width=&#34;704&#34;
	height=&#34;653&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329194924817_hu17036773054588331735.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329194924817_hu1798684085127828838.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329194924817&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;107&#34;
		data-flex-basis=&#34;258px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;mq技术选型&#34;&gt;MQ技术选型：
&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329200102356.png&#34;
	width=&#34;1607&#34;
	height=&#34;771&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329200102356_hu3763254191084168402.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329200102356_hu2869751836722322919.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329200102356&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;208&#34;
		data-flex-basis=&#34;500px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;MQ基本介绍&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329201108974.png&#34;
	width=&#34;1587&#34;
	height=&#34;802&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329201108974_hu6135235123200385865.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329201108974_hu1577231719991751175.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329201108974&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;197&#34;
		data-flex-basis=&#34;474px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;收发消息&#34;&gt;收发消息
&lt;/h2&gt;&lt;h3 id=&#34;交换机&#34;&gt;交换机
&lt;/h3&gt;&lt;p&gt;我们打开Exchanges选项卡，可以看到已经存在很多交换机：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325048208012.png&#34;
	width=&#34;1264&#34;
	height=&#34;750&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325048208012_hu1575866374575919438.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325048208012_hu5984088903414484251.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;168&#34;
		data-flex-basis=&#34;404px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;我们点击任意交换机，即可进入交换机详情页面。仍然会利用控制台中的publish message 发送一条消息：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820791.png&#34;
	width=&#34;947&#34;
	height=&#34;604&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820791_hu4211849581054738421.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820791_hu4037108282580582814.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;156&#34;
		data-flex-basis=&#34;376px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820792.png&#34;
	width=&#34;1092&#34;
	height=&#34;763&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820792_hu15670038542606732063.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820792_hu6850079180354799804.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;143&#34;
		data-flex-basis=&#34;343px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;这里是由控制台模拟了生产者发送的消息。由于没有消费者存在，最终消息丢失了，这样说明交换机没有存储消息的能力。&lt;/p&gt;
&lt;h3 id=&#34;队列&#34;&gt;队列
&lt;/h3&gt;&lt;p&gt;我们打开&lt;code&gt;Queues&lt;/code&gt;选项卡，新建一个队列：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820803.png&#34;
	width=&#34;1157&#34;
	height=&#34;517&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820803_hu10592266941339089980.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820803_hu6141731185345259803.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;223&#34;
		data-flex-basis=&#34;537px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;命名为&lt;code&gt;hello.queue1&lt;/code&gt;：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820804.png&#34;
	width=&#34;1163&#34;
	height=&#34;679&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820804_hu5590064280625466187.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820804_hu3818400371259742858.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;171&#34;
		data-flex-basis=&#34;411px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;再以相同的方式，创建一个队列，密码为&lt;code&gt;hello.queue2&lt;/code&gt;，最终队列列表如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820805.png&#34;
	width=&#34;1074&#34;
	height=&#34;445&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820805_hu13017222290830310051.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820805_hu2954394559935658959.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;241&#34;
		data-flex-basis=&#34;579px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;此时，我们再次向&lt;code&gt;amq.fanout&lt;/code&gt;交换机发送一条消息。会发现消息依然没有到达队列！！&lt;/p&gt;
&lt;p&gt;怎么回事呢？&lt;/p&gt;
&lt;p&gt;发送到交换机的消息，只会路由到与其绑定的队列，因此仅仅创建队列是不够的，我们还需要将其与交换机绑定。&lt;/p&gt;
&lt;h3 id=&#34;绑定关系&#34;&gt;绑定关系
&lt;/h3&gt;&lt;p&gt;点击&lt;code&gt;Exchanges&lt;/code&gt;选项卡，点击&lt;code&gt;amq.fanout&lt;/code&gt;交换机，进入交换机详情页，然后点击&lt;code&gt;Bindings&lt;/code&gt;菜单，在表单中填写要绑定的队列名称：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820806.png&#34;
	width=&#34;1022&#34;
	height=&#34;596&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820806_hu5073927743009907218.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820806_hu8622641730871158673.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;171&#34;
		data-flex-basis=&#34;411px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;相同的方式，将hello.queue2也绑定到改交换机。&lt;/p&gt;
&lt;p&gt;最终，绑定结果如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820807.png&#34;
	width=&#34;978&#34;
	height=&#34;477&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820807_hu13319730683268461540.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820807_hu11726259457600936365.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;205&#34;
		data-flex-basis=&#34;492px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;发送消息&#34;&gt;发送消息
&lt;/h3&gt;&lt;p&gt;再次回到exchange页面，找到刚刚绑定的&lt;code&gt;amq.fanout&lt;/code&gt;，点击进入详情页，再次发送一条消息：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820808.png&#34;
	width=&#34;1092&#34;
	height=&#34;763&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820808_hu15670038542606732063.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820808_hu6850079180354799804.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;143&#34;
		data-flex-basis=&#34;343px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;回到&lt;code&gt;Queues&lt;/code&gt;页面，可以发现&lt;code&gt;hello.queue&lt;/code&gt;中已经有一条消息了：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820809.png&#34;
	width=&#34;1051&#34;
	height=&#34;395&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820809_hu16788590190919236626.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-17432504820809_hu4942800076501842067.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;266&#34;
		data-flex-basis=&#34;638px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;点击队列名称，进入详情页，查看队列详情，这次我们点击get message：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325048208010.png&#34;
	width=&#34;974&#34;
	height=&#34;586&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325048208010_hu15654913287918059467.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325048208010_hu1986678225725098642.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;166&#34;
		data-flex-basis=&#34;398px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;可以看到消息到达队列了：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325048208011.png&#34;
	width=&#34;762&#34;
	height=&#34;578&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325048208011_hu14746741692419077829.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325048208011_hu16957734733456193881.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;131&#34;
		data-flex-basis=&#34;316px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;这个时候如果有消费者监听了MQ的&lt;code&gt;hello.queue1&lt;/code&gt;或&lt;code&gt;hello.queue2&lt;/code&gt;队列，自然就能接收到消息了。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329202305257.png&#34;
	width=&#34;916&#34;
	height=&#34;459&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329202305257_hu2219660582404196340.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329202305257_hu1545489312671821949.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329202305257&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;199&#34;
		data-flex-basis=&#34;478px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;数据隔离&#34;&gt;数据隔离
&lt;/h2&gt;&lt;h3 id=&#34;用户管理&#34;&gt;用户管理
&lt;/h3&gt;&lt;p&gt;点击&lt;code&gt;Admin&lt;/code&gt;选项卡，首先会看到RabbitMQ控制台的用户管理界面：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717425.png&#34;
	width=&#34;1580&#34;
	height=&#34;558&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717425_hu2381755380232464244.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717425_hu1638137278810542783.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;283&#34;
		data-flex-basis=&#34;679px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;这里的用户都是RabbitMQ的管理或运维人员。目前只有安装RabbitMQ时添加的&lt;code&gt;itheima&lt;/code&gt;这个用户。仔细观察用户表格中的字段，如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Name&lt;/code&gt;：&lt;code&gt;itheima&lt;/code&gt;，也就是用户名&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Tags&lt;/code&gt;：&lt;code&gt;administrator&lt;/code&gt;，说明&lt;code&gt;itheima&lt;/code&gt;用户是超级管理员，拥有所有权限&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Can access virtual host&lt;/code&gt;： &lt;code&gt;/&lt;/code&gt;，可以访问的&lt;code&gt;virtual host&lt;/code&gt;，这里的&lt;code&gt;/&lt;/code&gt;是默认的&lt;code&gt;virtual host&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;对于小型企业而言，出于成本考虑，我们通常只会搭建一套MQ集群，公司内的多个不同项目同时使用。这个时候为了避免互相干扰， 我们会利用&lt;code&gt;virtual host&lt;/code&gt;的隔离特性，将不同项目隔离。一般会做两件事情：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;给每个项目创建独立的运维账号，将管理权限分离。&lt;/li&gt;
&lt;li&gt;给每个项目创建不同的&lt;code&gt;virtual host&lt;/code&gt;，将每个项目的数据隔离。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;比如，我们给黑马商城创建一个新的用户，命名为&lt;code&gt;hmall&lt;/code&gt;：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717426.png&#34;
	width=&#34;1569&#34;
	height=&#34;755&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717426_hu4180748429497344088.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717426_hu4115716445191907293.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;207&#34;
		data-flex-basis=&#34;498px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;你会发现此时hmall用户没有任何&lt;code&gt;virtual host&lt;/code&gt;的访问权限：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717527.png&#34;
	width=&#34;927&#34;
	height=&#34;437&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717527_hu10415112619648439739.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717527_hu317770626178317220.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;212&#34;
		data-flex-basis=&#34;509px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;别急，接下来我们就来授权。&lt;/p&gt;
&lt;h3 id=&#34;virtual-host&#34;&gt;virtual host
&lt;/h3&gt;&lt;p&gt;我们先退出登录：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717528.png&#34;
	width=&#34;1571&#34;
	height=&#34;463&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717528_hu16886004155650288810.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717528_hu3180196074336965219.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;339&#34;
		data-flex-basis=&#34;814px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;切换到刚刚创建的hmall用户登录，然后点击&lt;code&gt;Virtual Hosts&lt;/code&gt;菜单，进入&lt;code&gt;virtual host&lt;/code&gt;管理页：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717529.png&#34;
	width=&#34;1565&#34;
	height=&#34;507&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717529_hu2642304458099785075.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717529_hu17454125237618155702.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;308&#34;
		data-flex-basis=&#34;740px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;可以看到目前只有一个默认的&lt;code&gt;virtual host&lt;/code&gt;，名字为 &lt;code&gt;/&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;我们可以给黑马商城项目创建一个单独的&lt;code&gt;virtual host&lt;/code&gt;，而不是使用默认的&lt;code&gt;/&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717530.png&#34;
	width=&#34;1555&#34;
	height=&#34;685&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717530_hu3060083524513858646.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717530_hu1335890182914955890.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;227&#34;
		data-flex-basis=&#34;544px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;创建完成后如图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717531.png&#34;
	width=&#34;990&#34;
	height=&#34;287&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717531_hu14406062656093119849.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717531_hu4737037534691442194.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;344&#34;
		data-flex-basis=&#34;827px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;由于我们是登录&lt;code&gt;hmall&lt;/code&gt;账户后创建的&lt;code&gt;virtual host&lt;/code&gt;，因此回到&lt;code&gt;users&lt;/code&gt;菜单，你会发现当前用户已经具备了对&lt;code&gt;/hmall&lt;/code&gt;这个&lt;code&gt;virtual host&lt;/code&gt;的访问权限了：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717532.png&#34;
	width=&#34;890&#34;
	height=&#34;432&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717532_hu12548930007698173911.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717532_hu18437138817427122421.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;206&#34;
		data-flex-basis=&#34;494px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;此时，点击页面右上角的&lt;code&gt;virtual host&lt;/code&gt;下拉菜单，切换&lt;code&gt;virtual host&lt;/code&gt;为 &lt;code&gt;/hmall&lt;/code&gt;：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717533.png&#34;
	width=&#34;1448&#34;
	height=&#34;277&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717533_hu6277353424186064687.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717533_hu6866510571255495274.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;522&#34;
		data-flex-basis=&#34;1254px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;然后再次查看queues选项卡，会发现之前的队列已经看不到了：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717534.png&#34;
	width=&#34;1443&#34;
	height=&#34;534&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717534_hu16264352394209975704.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/-174325207717534_hu7243287939753567582.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;270&#34;
		data-flex-basis=&#34;648px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;这就是基于&lt;code&gt;virtual host &lt;/code&gt;的隔离效果。&lt;/p&gt;
&lt;h1 id=&#34;springamqp&#34;&gt;SpringAMQP
&lt;/h1&gt;&lt;h2 id=&#34;快速入门&#34;&gt;快速入门
&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329204428105.png&#34;
	width=&#34;1667&#34;
	height=&#34;679&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329204428105_hu6976685752549187811.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329204428105_hu9759771255751438481.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329204428105&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;245&#34;
		data-flex-basis=&#34;589px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329204956187.png&#34;
	width=&#34;1290&#34;
	height=&#34;532&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329204956187_hu14282937853473641581.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329204956187_hu1023918813966171788.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329204956187&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;242&#34;
		data-flex-basis=&#34;581px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329205027331.png&#34;
	width=&#34;1411&#34;
	height=&#34;591&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329205027331_hu7222237480640178220.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329205027331_hu10577368724657143832.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329205027331&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;238&#34;
		data-flex-basis=&#34;572px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329205045344.png&#34;
	width=&#34;1544&#34;
	height=&#34;675&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329205045344_hu12726568561165773841.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329205045344_hu4457444755073899198.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329205045344&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;228&#34;
		data-flex-basis=&#34;548px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329205205931.png&#34;
	width=&#34;1436&#34;
	height=&#34;732&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329205205931_hu17302712754165693687.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329205205931_hu10376532292506687490.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329205205931&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;196&#34;
		data-flex-basis=&#34;470px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329211343418.png&#34;
	width=&#34;1578&#34;
	height=&#34;691&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329211343418_hu1573030282341966239.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329211343418_hu12046202085533541889.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329211343418&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;228&#34;
		data-flex-basis=&#34;548px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;workqueues模型&#34;&gt;WorkQueues模型
&lt;/h2&gt;&lt;p&gt;什么是WorkQueues模型&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329211527953.png&#34;
	width=&#34;1533&#34;
	height=&#34;653&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329211527953_hu11170682750777522586.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329211527953_hu1010778930981306919.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329211527953&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;234&#34;
		data-flex-basis=&#34;563px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329211603422.png&#34;
	width=&#34;1235&#34;
	height=&#34;399&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329211603422_hu18442693448151856201.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329211603422_hu15980624378195347968.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329211603422&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;309&#34;
		data-flex-basis=&#34;742px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;如果两个消费者处理队列消息的时间不同，那么就会造成阻塞，处理速度快的已经处理完了，而处理速度慢的还在处理，造成资源的浪费以及运行缓慢，所以有了消费者消息推送机制&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329215154463.png&#34;
	width=&#34;1544&#34;
	height=&#34;636&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329215154463_hu17599669405915534409.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329215154463_hu17011759565314401942.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329215154463&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;242&#34;
		data-flex-basis=&#34;582px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329215534509.png&#34;
	width=&#34;961&#34;
	height=&#34;463&#34;
	srcset=&#34;https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329215534509_hu18069053079466258447.png 480w, https://yanbin582.github.io/p/mq%E5%9F%BA%E7%A1%80/image-20250329215534509_hu12088173970672233513.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329215534509&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;207&#34;
		data-flex-basis=&#34;498px&#34;
	
&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>服务保护和分布式事务</title>
        <link>https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/</link>
        <pubDate>Fri, 28 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/</guid>
        <description>&lt;img src="https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image.png" alt="Featured image of post 服务保护和分布式事务" /&gt;&lt;h1 id=&#34;服务保护和分布式事务&#34;&gt;服务保护和分布式事务：
&lt;/h1&gt;&lt;h2 id=&#34;雪崩问题&#34;&gt;雪崩问题：
&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328134444211.png&#34;
	width=&#34;1433&#34;
	height=&#34;727&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328134444211_hu10692973366335014378.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328134444211_hu14707828031140839473.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250328134444211&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;197&#34;
		data-flex-basis=&#34;473px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;在微服务远程调用的过程中，还存在几个问题需要解决。&lt;/p&gt;
&lt;p&gt;首先是&lt;strong&gt;业务健壮性&lt;/strong&gt;问题：&lt;/p&gt;
&lt;p&gt;例如在之前的查询购物车列表业务中，购物车服务需要查询最新的商品信息，与购物车数据做对比，提醒用户。大家设想一下，如果商品服务查询时发生故障，查询购物车列表在调用商品服 务时，是不是也会异常？从而导致购物车查询失败。但从业务角度来说，为了提升用户体验，即便是商品查询失败，购物车列表也应该正确展示出来，哪怕是不包含最新的商品信息。&lt;/p&gt;
&lt;p&gt;还有&lt;strong&gt;级联****失败&lt;/strong&gt;问题：&lt;/p&gt;
&lt;p&gt;还是查询购物车的业务，假如商品服务业务并发较高，占用过多Tomcat连接。可能会导致商品服务的所有接口响应时间增加，延迟变高，甚至是长时间阻塞直至查询失败。&lt;/p&gt;
&lt;p&gt;此时查询购物车业务需要查询并等待商品查询结果，从而导致查询购物车列表业务的响应时间也变长，甚至也阻塞直至无法访问。而此时如果查询购物车的请求较多，可能导致购物车服务的Tomcat连接占用较多，所有接口的响应时间都会增加，整个服务性能很差， 甚至不可用。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328134732131.png&#34;
	width=&#34;646&#34;
	height=&#34;222&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328134732131_hu5143234214393369048.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328134732131_hu17737227579628393335.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250328134732131&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;290&#34;
		data-flex-basis=&#34;698px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;依次类推，整个微服务群中与购物车服务、商品服务等有调用关系的服务可能都会出现问题，最终导致整个集群不可用。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328134740809.png&#34;
	width=&#34;645&#34;
	height=&#34;356&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328134740809_hu12707295697087109529.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328134740809_hu3579318689707770108.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250328134740809&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;181&#34;
		data-flex-basis=&#34;434px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;这就是&lt;strong&gt;级联****失败&lt;/strong&gt;问题，或者叫&lt;strong&gt;雪崩&lt;/strong&gt;问题。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328134833938.png&#34;
	width=&#34;802&#34;
	height=&#34;506&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328134833938_hu3983712600898564792.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328134833938_hu5818190293669560707.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250328134833938&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;158&#34;
		data-flex-basis=&#34;380px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;雪崩的解决方案&#34;&gt;雪崩的解决方案
&lt;/h3&gt;&lt;h4 id=&#34;解决雪崩问题常见的三种方案&#34;&gt;解决雪崩问题常见的三种方案：
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;请求限流：限制流量在服务可以处理的范围内，避免因为有突发流量而造成故障&lt;/li&gt;
&lt;li&gt;线程隔离：控制业务可用的线程数量，将故障隔离在一定范围&lt;/li&gt;
&lt;li&gt;服务熔断：将异常比例过高的接口断开，拒绝所有请求，直接走fallback&lt;/li&gt;
&lt;li&gt;失败处理：定义fallback逻辑，让业务处理异常请求时不抛出异常，而是直接走定义好的备选方案，返回默认数据或者友好提示&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328135049682.png&#34;
	width=&#34;1457&#34;
	height=&#34;784&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328135049682_hu6687255263847310338.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328135049682_hu12251954498459728239.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250328135049682&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;185&#34;
		data-flex-basis=&#34;446px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328135616142.png&#34;
	width=&#34;1528&#34;
	height=&#34;673&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328135616142_hu11688983963109209858.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328135616142_hu4856191244461072633.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250328135616142&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;227&#34;
		data-flex-basis=&#34;544px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328151408697.png&#34;
	width=&#34;1458&#34;
	height=&#34;699&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328151408697_hu17865385929684124458.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328151408697_hu15240544370254346485.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250328151408697&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;208&#34;
		data-flex-basis=&#34;500px&#34;
	
&gt;&lt;/p&gt;
&lt;h4 id=&#34;服务保护技术&#34;&gt;服务保护技术：
&lt;/h4&gt;&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328151916106.png&#34;
	width=&#34;1567&#34;
	height=&#34;622&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328151916106_hu3627962377500041051.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328151916106_hu6966611783901378980.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250328151916106&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;251&#34;
		data-flex-basis=&#34;604px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;sentinel&#34;&gt;Sentinel
&lt;/h2&gt;&lt;p&gt;Sentinel是阿里巴巴开源的一款微服务流量控制组件&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328152222853.png&#34;
	width=&#34;1471&#34;
	height=&#34;739&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328152222853_hu11611818769654800600.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328152222853_hu17158714886342895896.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250328152222853&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;199&#34;
		data-flex-basis=&#34;477px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328154304833.png&#34;
	width=&#34;1535&#34;
	height=&#34;610&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328154304833_hu14858033004477268040.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328154304833_hu13583577102681155430.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250328154304833&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;251&#34;
		data-flex-basis=&#34;603px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;如何使用sentinel去实现请求限流&#34;&gt;如何使用sentinel去实现请求限流：
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328154545157.png&#34;
	width=&#34;1432&#34;
	height=&#34;725&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328154545157_hu1795594140089703556.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328154545157_hu529152586502015425.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250328154545157&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;197&#34;
		data-flex-basis=&#34;474px&#34;
	
&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328154608977.png&#34;
	width=&#34;1455&#34;
	height=&#34;751&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328154608977_hu12958048253095194447.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328154608977_hu9244955696341853336.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250328154608977&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;193&#34;
		data-flex-basis=&#34;464px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;如何使用sentinel实现线程隔离&#34;&gt;如何使用sentinel实现线程隔离：
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328155727765.png&#34;
	width=&#34;1515&#34;
	height=&#34;591&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328155727765_hu8088164200089271434.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328155727765_hu16435971575198501613.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250328155727765&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;256&#34;
		data-flex-basis=&#34;615px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328160044936.png&#34;
	width=&#34;1465&#34;
	height=&#34;752&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328160044936_hu9704880257457628.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328160044936_hu13474719073456330776.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250328160044936&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;194&#34;
		data-flex-basis=&#34;467px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;fallback&#34;&gt;Fallback：
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328162144182.png&#34;
	width=&#34;1470&#34;
	height=&#34;694&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328162144182_hu17411808764131928623.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328162144182_hu1174666751271145321.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250328162144182&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;211&#34;
		data-flex-basis=&#34;508px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;通过FeignClient作为sentinel的簇点资源，来实现fallback的实现：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328162338422.png&#34;
	width=&#34;1368&#34;
	height=&#34;730&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328162338422_hu13329452272825079275.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328162338422_hu12759957480571559002.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250328162338422&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;187&#34;
		data-flex-basis=&#34;449px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328162510888.png&#34;
	width=&#34;1368&#34;
	height=&#34;730&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328162510888_hu13329452272825079275.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328162510888_hu12759957480571559002.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250328162510888&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;187&#34;
		data-flex-basis=&#34;449px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328162519306.png&#34;
	width=&#34;1293&#34;
	height=&#34;730&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328162519306_hu9117404108797955953.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328162519306_hu14201156775478739670.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250328162519306&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;177&#34;
		data-flex-basis=&#34;425px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;服务熔断&#34;&gt;服务熔断：
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328164819852.png&#34;
	width=&#34;1545&#34;
	height=&#34;670&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328164819852_hu6117770050770930936.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328164819852_hu11215610050417534463.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250328164819852&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;230&#34;
		data-flex-basis=&#34;553px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328170248044.png&#34;
	width=&#34;1590&#34;
	height=&#34;726&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328170248044_hu5961691856085408602.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328170248044_hu4318653981836796644.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250328170248044&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;219&#34;
		data-flex-basis=&#34;525px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328170300438.png&#34;
	width=&#34;1428&#34;
	height=&#34;774&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328170300438_hu16936670252837832078.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250328170300438_hu4869116906609958662.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250328170300438&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;184&#34;
		data-flex-basis=&#34;442px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;分布式事务&#34;&gt;分布式事务
&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329160819623.png&#34;
	width=&#34;1565&#34;
	height=&#34;788&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329160819623_hu3759624203944767741.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329160819623_hu1930831928423739096.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329160819623&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;198&#34;
		data-flex-basis=&#34;476px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;seata&#34;&gt;Seata
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329160900939.png&#34;
	width=&#34;1550&#34;
	height=&#34;773&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329160900939_hu4524220157833657672.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329160900939_hu802996817980045377.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329160900939&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;200&#34;
		data-flex-basis=&#34;481px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329161043465.png&#34;
	width=&#34;1411&#34;
	height=&#34;792&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329161043465_hu7173911311730607674.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329161043465_hu15764838992354122602.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329161043465&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;178&#34;
		data-flex-basis=&#34;427px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329162313817.png&#34;
	width=&#34;1460&#34;
	height=&#34;787&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329162313817_hu10743718913471310844.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329162313817_hu13136985096143913550.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329162313817&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;185&#34;
		data-flex-basis=&#34;445px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;部署tc服务&#34;&gt;部署TC服务
&lt;/h3&gt;&lt;p&gt;准备数据库表&lt;/p&gt;
&lt;p&gt;Seata支持多种存储模式，但考虑到持久化的需要，我们一般选择基于数据库存储。执行课前资料提供的&lt;code&gt;《seata-tc.sql》&lt;/code&gt;，导入数据库表：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-17432375034334.png&#34;
	width=&#34;813&#34;
	height=&#34;505&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-17432375034334_hu6875180261017632954.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-17432375034334_hu14262789981499813501.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;160&#34;
		data-flex-basis=&#34;386px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;准备配置文件&lt;/p&gt;
&lt;p&gt;课前资料准备了一个seata目录，其中包含了seata运行时所需要的配置文件：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-17432375034331.png&#34;
	width=&#34;743&#34;
	height=&#34;350&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-17432375034331_hu17536322886051770237.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-17432375034331_hu444037472082662824.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;212&#34;
		data-flex-basis=&#34;509px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;其中包含中文注释，大家可以自行阅读。&lt;/p&gt;
&lt;p&gt;我们将整个seata文件夹拷贝到虚拟机的&lt;code&gt;/root&lt;/code&gt;目录：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-17432375034332.png&#34;
	width=&#34;713&#34;
	height=&#34;391&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-17432375034332_hu17888298138196331704.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-17432375034332_hu17566445266342815933.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;182&#34;
		data-flex-basis=&#34;437px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Docker部署&lt;/p&gt;
&lt;p&gt;需要注意，要确保nacos、mysql都在hm-net网络中。如果某个容器不再hm-net网络，可以参考下面的命令将某容器加入指定网络：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker network connect &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;网络名&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;容器名&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;在虚拟机的&lt;code&gt;/root&lt;/code&gt;目录执行下面的命令：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-Shell&#34; data-lang=&#34;Shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker run --name seata &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;-p 8099:8099 &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;-p 7099:7099 &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;-e &lt;span class=&#34;nv&#34;&gt;SEATA_IP&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;192.168.150.101 &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;-v ./seata:/seata-server/resources &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--privileged&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--network hm-net &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;-d &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;seataio/seata-server:1.5.2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;如果镜像下载困难，也可以把课前资料提供的镜像上传到虚拟机并加载：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-17432375034333.png&#34;
	width=&#34;777&#34;
	height=&#34;325&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-17432375034333_hu4700742319901406551.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-17432375034333_hu15794534763504196587.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;239&#34;
		data-flex-basis=&#34;573px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;微服务集成seata客户端&#34;&gt;微服务集成Seata客户端
&lt;/h3&gt;&lt;p&gt;微服务集成Seata&lt;/p&gt;
&lt;p&gt;参与分布式事务的每一个微服务都需要集成Seata，我们以&lt;code&gt;trade-service&lt;/code&gt;为例。&lt;/p&gt;
&lt;h4 id=&#34;引入依赖&#34;&gt;引入依赖
&lt;/h4&gt;&lt;p&gt;为了方便各个微服务集成seata，我们需要把seata配置共享到nacos，因此&lt;code&gt;trade-service&lt;/code&gt;模块不仅仅要引入seata依赖，还要引入nacos依赖:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-XML&#34; data-lang=&#34;XML&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c&#34;&gt;&amp;lt;!--统一配置管理--&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nt&#34;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.alibaba.cloud&lt;span class=&#34;nt&#34;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nt&#34;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-cloud-starter-alibaba-nacos-config&lt;span class=&#34;nt&#34;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c&#34;&gt;&amp;lt;!--读取bootstrap文件--&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nt&#34;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.cloud&lt;span class=&#34;nt&#34;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nt&#34;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-cloud-starter-bootstrap&lt;span class=&#34;nt&#34;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c&#34;&gt;&amp;lt;!--seata--&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nt&#34;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.alibaba.cloud&lt;span class=&#34;nt&#34;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nt&#34;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-cloud-starter-alibaba-seata&lt;span class=&#34;nt&#34;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;改造配置&#34;&gt;改造配置
&lt;/h4&gt;&lt;p&gt;首先在nacos上添加一个共享的seata配置，命名为&lt;code&gt;shared-seata.yaml&lt;/code&gt;：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-17432375993839.png&#34;
	width=&#34;1552&#34;
	height=&#34;799&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-17432375993839_hu3364137795444252013.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-17432375993839_hu8141502249769487851.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;194&#34;
		data-flex-basis=&#34;466px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;内容如下：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-YAML&#34; data-lang=&#34;YAML&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;seata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;registry&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# TC服务注册中心的配置，微服务根据这些信息去注册中心获取tc服务地址&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;nacos&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 注册中心类型 nacos&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;nacos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;server-addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;192.168.150.101&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8848&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# nacos地址&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# namespace，默认为空&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;group&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;DEFAULT_GROUP&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 分组，默认是DEFAULT_GROUP&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;application&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;seata-server&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# seata服务名称&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;username&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;nacos&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;password&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;nacos&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;tx-service-group&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;hmall&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 事务组名称&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;service&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;vgroup-mapping&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 事务组与tc集群的映射关系&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hmall&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;default&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;然后，改造&lt;code&gt;trade-service&lt;/code&gt;模块，添加&lt;code&gt;bootstrap.yaml&lt;/code&gt;：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-174323759938410.png&#34;
	width=&#34;918&#34;
	height=&#34;348&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-174323759938410_hu15163847896665643603.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-174323759938410_hu13506620346662937981.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;263&#34;
		data-flex-basis=&#34;633px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;内容如下:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-YAML&#34; data-lang=&#34;YAML&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;spring&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;application&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;trade-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 服务名称&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;profiles&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;active&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;dev&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;cloud&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;nacos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;server-addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;192.168.150.101&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# nacos地址&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;file-extension&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;yaml&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 文件后缀名&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;shared-configs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 共享配置&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;dataId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;shared-jdbc.yaml&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 共享mybatis配置&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;dataId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;shared-log.yaml&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 共享日志配置&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;dataId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;shared-swagger.yaml&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 共享日志配置&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;dataId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;shared-seata.yaml&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 共享seata配置&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;可以看到这里加载了共享的seata配置。&lt;/p&gt;
&lt;p&gt;然后改造application.yaml文件，内容如下：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-YAML&#34; data-lang=&#34;YAML&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8085&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;feign&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;okhttp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;enabled&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 开启OKHttp连接池支持&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;sentinel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;enabled&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 开启Feign对Sentinel的整合&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;swagger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;交易服务接口文档&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;package&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;com.hmall.trade.controller&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;db&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;database&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;hm-trade&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;参考上述办法分别改造&lt;code&gt;hm-cart&lt;/code&gt;和&lt;code&gt;hm-item&lt;/code&gt;两个微服务模块。&lt;/p&gt;
&lt;h4 id=&#34;添加数据库表&#34;&gt;添加数据库表
&lt;/h4&gt;&lt;p&gt;seata的客户端在解决分布式事务的时候需要记录一些中间数据，保存在数据库中。因此我们要先准备一个这样的表。&lt;/p&gt;
&lt;p&gt;将课前资料的seata-at.sql分别文件导入hm-trade、hm-cart、hm-item三个数据库中：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-174323759938411.png&#34;
	width=&#34;750&#34;
	height=&#34;279&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-174323759938411_hu2065770332509235580.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-174323759938411_hu10057665192968345462.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;268&#34;
		data-flex-basis=&#34;645px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;结果：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-174323759938412.png&#34;
	width=&#34;810&#34;
	height=&#34;437&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-174323759938412_hu4871736406488747320.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-174323759938412_hu12902994226177124408.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;185&#34;
		data-flex-basis=&#34;444px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;OK，至此为止，微服务整合的工作就完成了。可以参考上述方式对&lt;code&gt;hm-item&lt;/code&gt;和&lt;code&gt;hm-cart&lt;/code&gt;模块完成整合改造。&lt;/p&gt;
&lt;h4 id=&#34;测试&#34;&gt;测试
&lt;/h4&gt;&lt;p&gt;接下来就是测试的分布式事务的时候了。&lt;/p&gt;
&lt;p&gt;我们找到&lt;code&gt;trade-service&lt;/code&gt;模块下的&lt;code&gt;com.hmall.trade.service.impl.OrderServiceImpl&lt;/code&gt;类中的&lt;code&gt;createOrder&lt;/code&gt;方法，也就是下单业务方法。&lt;/p&gt;
&lt;p&gt;将其上的&lt;code&gt;@Transactional&lt;/code&gt;注解改为Seata提供的&lt;code&gt;@GlobalTransactional&lt;/code&gt;：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-174323759938413.png&#34;
	width=&#34;1459&#34;
	height=&#34;867&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-174323759938413_hu293411698248708912.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/-174323759938413_hu3656286298579025836.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;img&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;168&#34;
		data-flex-basis=&#34;403px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;@GlobalTransactional&lt;/code&gt;注解就是在标记事务的起点，将来TM就会基于这个方法判断全局事务范围，初始化全局事务。&lt;/p&gt;
&lt;p&gt;我们重启&lt;code&gt;trade-service&lt;/code&gt;、&lt;code&gt;item-service&lt;/code&gt;、&lt;code&gt;cart-service&lt;/code&gt;三个服务。再次测试，发现分布式事务的问题解决了！&lt;/p&gt;
&lt;p&gt;那么，Seata是如何解决分布式事务的呢？&lt;/p&gt;
&lt;h3 id=&#34;xa模式&#34;&gt;XA模式
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329170137582.png&#34;
	width=&#34;1595&#34;
	height=&#34;793&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329170137582_hu4448348999345959094.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329170137582_hu1315165363304536274.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329170137582&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;201&#34;
		data-flex-basis=&#34;482px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329170203729.png&#34;
	width=&#34;801&#34;
	height=&#34;414&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329170203729_hu18139043748125111992.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329170203729_hu18430323629101370935.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329170203729&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;193&#34;
		data-flex-basis=&#34;464px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329170234397.png&#34;
	width=&#34;1412&#34;
	height=&#34;777&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329170234397_hu8129381218655948950.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329170234397_hu11609488803901418897.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329170234397&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;181&#34;
		data-flex-basis=&#34;436px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;at模式&#34;&gt;AT模式
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329171256323.png&#34;
	width=&#34;1590&#34;
	height=&#34;786&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329171256323_hu3814756643100333046.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329171256323_hu3690912445819208628.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329171256323&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;202&#34;
		data-flex-basis=&#34;485px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329171424323.png&#34;
	width=&#34;894&#34;
	height=&#34;577&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329171424323_hu739471704765820563.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329171424323_hu18134016783169640356.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329171424323&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;154&#34;
		data-flex-basis=&#34;371px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329171613672.png&#34;
	width=&#34;1456&#34;
	height=&#34;811&#34;
	srcset=&#34;https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329171613672_hu9400547546221452084.png 480w, https://yanbin582.github.io/p/%E6%9C%8D%E5%8A%A1%E4%BF%9D%E6%8A%A4%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/image-20250329171613672_hu15101368929749570172.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250329171613672&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;179&#34;
		data-flex-basis=&#34;430px&#34;
	
&gt;&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
